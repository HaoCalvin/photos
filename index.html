<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>流光相册（去中心化）</title>
  <link rel="stylesheet" href="styles.css" />
  <!-- GunJS + SEA + WebRTC -->
  <script src="https://cdn.jsdelivr.net/npm/gun/gun.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/gun/sea.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/gun/lib/webrtc.js"></script>
</head>
<body>
  <header class="topbar">
    <div class="brand">流光相册</div>
    <div class="searchbar">
      <input id="searchInput" placeholder="搜索关键词或用户名..." />
      <button id="searchBtn">搜索</button>
    </div>
    <div class="controls">
      <button id="themeBtn">主题</button>
      <button id="uploadBtn">上传</button>
      <button id="profileBtn">个人</button>
    </div>
  </header>

  <main class="container">
    <aside class="leftpanel">
      <div class="card profile-card" id="profileCard">
        <!-- 登录/注册或用户信息 -->
      </div>

      <div class="card stats-card" id="statsCard">
        <h3>统计</h3>
        <div id="statsContent">加载中...</div>
      </div>

      <div class="card hot-card">
        <h3>热门图片</h3>
        <div id="hotList"></div>
      </div>

      <div class="card help-card">
        <h3>使用提示</h3>
        <ul>
          <li>注册：用户名+密码（也可用邮箱登录）</li>
          <li>上传：必须填写至少一个关键词</li>
          <li>隐藏图片：只有你能查看（加密）</li>
          <li>喜欢/取消喜欢会实时同步</li>
        </ul>
      </div>
    </aside>

    <section class="feed" id="feed">
      <!-- 照片流 -->
    </section>

    <aside class="rightpanel">
      <div class="card upload-card" id="uploadCard" hidden>
        <h3>上传图片</h3>
        <input type="file" id="fileInput" accept="image/*" />
        <input id="photoTitle" placeholder="标题 (可选)" />
        <input id="photoKeywords" placeholder="关键词，用逗号分隔（至少一个）" />
        <label><input type="checkbox" id="photoHidden" /> 隐藏 (只有我能看)</label>
        <button id="doUploadBtn">上传并发布</button>
        <button id="closeUploadBtn">关闭</button>
        <div id="uploadStatus"></div>
      </div>

      <div class="card login-card" id="loginCard">
        <h3>登录 / 注册</h3>
        <input id="loginAlias" placeholder="用户名 或 邮箱" />
        <input id="loginPass" type="password" placeholder="密码" />
        <div class="login-actions">
          <button id="loginBtn">登录</button>
          <button id="registerBtn">注册</button>
        </div>
        <div class="login-extra">
          <button id="logoutBtn" hidden>登出</button>
          <button id="editProfileBtn" hidden>编辑资料</button>
          <button id="adminDeleteBtn" title="管理员删除模式">管理员</button>
        </div>
        <div id="loginMsg"></div>
      </div>

      <div class="card profile-edit-card" id="profileEditCard" hidden>
        <h3>编辑个人信息</h3>
        <input id="editName" placeholder="显示名" />
        <input id="editBio" placeholder="简介" />
        <input id="editAvatarFile" type="file" accept="image/*" />
        <button id="saveProfileBtn">保存</button>
        <button id="cancelEditProfileBtn">取消</button>
        <div id="profileMsg"></div>
      </div>
    </aside>
  </main>

  <!-- 图片查看模态 -->
  <div id="viewer" class="viewer" hidden>
    <div class="viewer-backdrop" id="viewerBackdrop"></div>
    <div class="viewer-body">
      <button id="viewerClose">×</button>
      <img id="viewerImg" src="" alt="大图" />
      <div id="viewerMeta"></div>
    </div>
  </div>

  <footer class="footer">
    © 流光相册 · 去中心化演示 · 请使用 HTTPS 访问
  </footer>

  <script src="app.js"></script>
</body>
</html>